<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel Complaint System - Advanced</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',Tahoma,sans-serif;}
body{background:#f0f2f5;padding-bottom:50px;}
header{background:linear-gradient(90deg,#1abc9c,#16a085);color:white;text-align:center;padding:20px;font-size:1.8em;font-weight:bold;box-shadow:0 4px 6px rgba(0,0,0,0.1);}
.container{width:90%;max-width:900px;margin:30px auto;}
form{background:white;padding:25px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.1);margin-bottom:30px;}
input,textarea,select{width:100%;padding:12px 15px;margin:10px 0;border:1px solid #ccc;border-radius:8px;font-size:1em;transition:all 0.3s ease;}
input:focus,textarea:focus,select:focus{border-color:#1abc9c;outline:none;box-shadow:0 0 5px rgba(26,188,156,0.5);}
button{border:none;border-radius:8px;padding:12px 25px;font-size:1em;cursor:pointer;transition:0.3s;}
.submit-btn{background:#1abc9c;color:white;}
.submit-btn:hover{background:#16a085;}
.complaint{background:white;padding:20px;margin-bottom:20px;border-left:8px solid #e67e22;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.05);transition:transform 0.2s,box-shadow 0.2s;}
.complaint:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(0,0,0,0.1);}
.complaint h4{color:#2c3e50;margin-bottom:5px;}
.complaint p{margin-bottom:5px;color:#555;}
.status{font-weight:bold;display:inline-block;padding:4px 10px;border-radius:12px;font-size:0.9em;margin-top:5px;}
.status.Pending{background:#f39c12;color:white;}
.status.Resolved{background:#27ae60;color:white;}
.actions button{margin-right:10px;padding:8px 14px;border-radius:8px;font-weight:bold;transition:0.3s;}
.resolve-btn{background:#2980b9;color:white;}
.resolve-btn:hover{background:#1f618d;}
.delete-btn{background:#c0392b;color:white;}
.delete-btn:hover{background:#922b21;}
.tab{display:flex;margin-bottom:20px;justify-content:center;}
.tab button{padding:10px 20px;margin:0 5px;border-radius:10px;background:#3498db;color:white;font-weight:bold;cursor:pointer;transition:0.3s;}
.tab button:hover{background:#2980b9;}
.hidden{display:none;}
.forgot{color:#e67e22;cursor:pointer;font-size:0.9em;margin-top:5px;display:inline-block;}
.forgot:hover{text-decoration:underline;}
.logout-btn{background:#e74c3c;color:white;padding:10px 20px;border-radius:8px;margin-top:15px;}
.logout-btn:hover{background:#c0392b;}
/* Toast Notification */
.toast{position:fixed;top:20px;right:20px;background:#1abc9c;color:white;padding:12px 20px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.2);opacity:0;transform: translateY(-20px);transition:opacity 0.5s,transform 0.5s;z-index:9999;}
.toast.show{opacity:1;transform: translateY(0);}
</style>
</head>
<body>

<header>Advanced Admin Panel Complaint System</header>

<div class="container">

<!-- Tabs -->
<div class="tab">
    <button onclick="showUserPanel()">User Panel</button>
    <button onclick="showAdminPanel()">Admin Panel</button>
</div>

<!-- User Panel -->
<div id="userPanel">
    <form id="complaintForm">
        <h3>Submit Your Complaint</h3>
        <input type="text" id="name" placeholder="Your Name" required>
        <input type="text" id="title" placeholder="Complaint Title" required>
        <textarea id="description" placeholder="Complaint Description" required></textarea>
        <button type="submit" class="submit-btn">Submit Complaint</button>
    </form>
</div>

<!-- Admin Panel -->
<div id="adminPanel" class="hidden">
    <form id="adminLoginForm">
        <h3>Admin Login</h3>
        <input type="text" id="adminUser" placeholder="Username" required>
        <input type="password" id="adminPass" placeholder="Password" required>
        <button type="submit" class="submit-btn">Login</button>
        <span class="forgot" onclick="forgotPassword()">Forgot Password?</span>
    </form>

    <div id="adminContent" class="hidden">
        <h3>All Complaints</h3>
        <label for="filterStatus">Filter by Status:</label>
        <select id="filterStatus" onchange="displayComplaints()">
            <option value="All">All</option>
            <option value="Pending">Pending</option>
            <option value="Resolved">Resolved</option>
        </select>
        <div id="complaintList"></div>
        <button onclick="logoutAdmin()" class="logout-btn">Logout</button>
    </div>
</div>

</div>

<!-- Toast -->
<div id="toast" class="toast"></div>

<script>
let complaints = JSON.parse(localStorage.getItem("complaints")) || [];

// Admin credentials
let ADMIN_USERNAME = "admin";
let ADMIN_PASSWORD = "admin123";

// Tabs
function showUserPanel(){
    document.getElementById("userPanel").classList.remove("hidden");
    document.getElementById("adminPanel").classList.add("hidden");
}
function showAdminPanel(){
    document.getElementById("userPanel").classList.add("hidden");
    document.getElementById("adminPanel").classList.remove("hidden");
}

// Toast
function showToast(message){
    const toast = document.getElementById("toast");
    toast.textContent = message;
    toast.classList.add("show");
    setTimeout(()=>{toast.classList.remove("show");},3000);
}

// User submits complaint
const form = document.getElementById("complaintForm");
form.addEventListener("submit",(e)=>{
    e.preventDefault();
    const name = document.getElementById("name").value;
    const title = document.getElementById("title").value;
    const description = document.getElementById("description").value;
    const date = new Date().toLocaleString(); // Add date/time
    complaints.push({name,title,description,status:"Pending",date});
    localStorage.setItem("complaints",JSON.stringify(complaints));
    form.reset();
    showToast("Complaint Submitted Successfully!");
});

// Admin Login
const adminForm = document.getElementById("adminLoginForm");
adminForm.addEventListener("submit",(e)=>{
    e.preventDefault();
    const user = document.getElementById("adminUser").value;
    const pass = document.getElementById("adminPass").value;
    if(user===ADMIN_USERNAME && pass===ADMIN_PASSWORD){
        document.getElementById("adminLoginForm").classList.add("hidden");
        document.getElementById("adminContent").classList.remove("hidden");
        displayComplaints();
        showToast("Admin Logged In Successfully!");
    }else{
        showToast("Invalid Credentials!");
    }
});

// Display complaints
function displayComplaints(){
    const complaintList = document.getElementById("complaintList");
    const filter = document.getElementById("filterStatus").value;
    complaintList.innerHTML="";
    complaints.forEach((c,i)=>{
        if(filter!=="All" && c.status!==filter) return; // Apply filter
        let div = document.createElement("div");
        div.className="complaint";
        div.innerHTML=`
            <h4>${c.title}</h4>
            <p><b>Name:</b> ${c.name}</p>
            <p>${c.description}</p>
            <p><b>Submitted on:</b> ${c.date}</p>
            <span class="status ${c.status}">${c.status}</span>
            <div class="actions">
                ${c.status==='Pending'?`<button class="resolve-btn" onclick="toggleStatus(${i})">Mark Resolved</button>`:``}
                <button class="delete-btn" onclick="deleteComplaint(${i})">Delete</button>
            </div>
        `;
        complaintList.appendChild(div);
    });
}

// Admin functions
function toggleStatus(index){
    complaints[index].status="Resolved";
    localStorage.setItem("complaints",JSON.stringify(complaints));
    displayComplaints();
    showToast("Complaint Marked Resolved!");
}
function deleteComplaint(index){
    complaints.splice(index,1);
    localStorage.setItem("complaints",JSON.stringify(complaints));
    displayComplaints();
    showToast("Complaint Deleted!");
}
function logoutAdmin(){
    document.getElementById("adminContent").classList.add("hidden");
    document.getElementById("adminLoginForm").classList.remove("hidden");
    document.getElementById("adminLoginForm").reset();
    showToast("Admin Logged Out!");
}

// Forgot Password
function forgotPassword(){
    const newPass = prompt("Enter new password for admin:");
    if(newPass && newPass.trim()!==""){
        ADMIN_PASSWORD = newPass.trim();
        localStorage.setItem("admin_password", ADMIN_PASSWORD);
        showToast("Password changed successfully!");
    }else{
        showToast("Password not changed.");
    }
}

// Load saved password
const storedPass = localStorage.getItem("admin_password");
if(storedPass) ADMIN_PASSWORD = storedPass;

</script>
</body>
</html>